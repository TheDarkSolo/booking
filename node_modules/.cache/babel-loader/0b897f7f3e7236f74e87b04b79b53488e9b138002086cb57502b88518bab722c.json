{"ast":null,"code":"import _objectSpread from\"/home/erbulan/booking/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/erbulan/booking/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/erbulan/booking/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/erbulan/booking/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useForm}from\"react-hook-form\";import{useNavigate}from\"react-router\";import{useDispatch}from\"react-redux\";import ModalLoading from\"../Reservation/ModalLoading/ModalLoading\";import{getUserByAppNumber}from\"../../helpers/ApiRequestList\";import\"./ResultExam.css\";import ModalNotFoundDT from\"../Modal/ModalNotFoundDT\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ResultExam=function ResultExam(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isloading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isDTFound=_useState4[0],setisDTFound=_useState4[1];var navigate=useNavigate();var dispatch=useDispatch();//use hook form\nvar _useForm=useForm({mode:\"onChange\",numberDT:\"\"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isDirty=_useForm$formState.isDirty,isValid=_useForm$formState.isValid;var searchDigitalTicket=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var response,userDataStorage;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getUserByAppNumber(data.numberDT);case 2:response=_context.sent;userDataStorage=sessionStorage.getItem(\"user\");if(response.fields!==userDataStorage){sessionStorage.setItem('user',JSON.stringify(response));}if(response.find===false){setisDTFound(true);}else{setIsLoading(true);setTimeout(function(){navigate(\"/search-result-exam\");setIsLoading(false);},3000);}reset();case 7:case\"end\":return _context.stop();}},_callee);}));return function searchDigitalTicket(_x){return _ref.apply(this,arguments);};}();useEffect(function(){},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"offset_result_exam\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-center\",children:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0426\\u0422\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center justify-content-center w-100 min-h-100 mt-5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(searchDigitalTicket),className:\"d-flex flex-column w-100 align-items-center justify-content-center mt-2\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"form-control w-50 input_res_exam\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0426\\u0422\",maxLength:\"12\",minLength:\"12\",type:\"text\",name:\"numberDT\"},register(\"numberDT\",{required:\"Введите номер цифрового талона\",minLength:{value:12,message:\"Введите валидный номер цифрового талона\"},maxLength:{value:12,message:\"Введите валидный номер цифрового талона\"},pattern:{value:/^[0-9]+$/,message:\"Цифровой талон состоит только из цифр\"}}))),(errors===null||errors===void 0?void 0:errors.numberDT)&&/*#__PURE__*/_jsx(\"p\",{className:\"error_text text-danger my-2\",children:errors.numberDT.message}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex w-100 align-items-center justify-content-center my-5\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success px-4 py-2\",disabled:!isDirty||!isValid,children:\"\\u043F\\u043E\\u0438\\u0441\\u043A\"})})]})}),isloading&&/*#__PURE__*/_jsx(ModalLoading,{isLoading:isloading}),/*#__PURE__*/_jsx(ModalNotFoundDT,{isDTFound:isDTFound,setShow:setisDTFound})]});};export default ResultExam;","map":{"version":3,"names":["React","useEffect","useState","useForm","useNavigate","useDispatch","ModalLoading","getUserByAppNumber","ModalNotFoundDT","jsx","_jsx","jsxs","_jsxs","ResultExam","_useState","_useState2","_slicedToArray","isloading","setIsLoading","_useState3","_useState4","isDTFound","setisDTFound","navigate","dispatch","_useForm","mode","numberDT","register","handleSubmit","reset","_useForm$formState","formState","errors","isDirty","isValid","searchDigitalTicket","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","response","userDataStorage","wrap","_callee$","_context","prev","next","sent","sessionStorage","getItem","fields","setItem","JSON","stringify","find","setTimeout","stop","_x","apply","arguments","className","children","onSubmit","_objectSpread","placeholder","maxLength","minLength","type","name","required","value","message","pattern","disabled","isLoading","setShow"],"sources":["/home/erbulan/booking/src/Components/ResultExam/ResultExam.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router\";\nimport { useDispatch } from \"react-redux\";\n\nimport ModalLoading from \"../Reservation/ModalLoading/ModalLoading\";\nimport { getUserByAppNumber } from \"../../helpers/ApiRequestList\";\n\nimport \"./ResultExam.css\";\nimport ModalNotFoundDT from \"../Modal/ModalNotFoundDT\";\n\nconst ResultExam = () => {\n  const [isloading, setIsLoading] = useState(false);\n  const [isDTFound,setisDTFound] = useState(false)\n \n\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n\n  //use hook form\n  const {\n    register,\n    handleSubmit,\n    reset,\n    formState: { errors, isDirty, isValid },\n  } = useForm({\n    mode: \"onChange\",\n    numberDT: \"\",\n  });\n\n  const searchDigitalTicket = async (data) => {\n    const response = await getUserByAppNumber(data.numberDT);\n    \n    const userDataStorage = sessionStorage.getItem(\"user\")\n\n    if(response.fields !== userDataStorage){\n      sessionStorage.setItem('user',JSON.stringify(response))\n    }\n    \n    if (response.find === false) {\n      setisDTFound(true)\n    } else {\n      setIsLoading(true);\n      setTimeout(() => {\n        navigate(\"/search-result-exam\");\n        setIsLoading(false);\n      }, 3000);\n    }\n\n    reset();\n  };\n\n  useEffect(() => {}, []);\n\n  return (\n    <div className=\"offset_result_exam\">\n      <h4 className=\"text-center\">Введите номер ЦТ</h4>\n      <div className=\"d-flex align-items-center justify-content-center w-100 min-h-100 mt-5\">\n        <form\n          onSubmit={handleSubmit(searchDigitalTicket)}\n          className=\"d-flex flex-column w-100 align-items-center justify-content-center mt-2\"\n        >\n          <input\n            className=\"form-control w-50 input_res_exam\"\n            placeholder=\"Введите номер ЦТ\"\n            maxLength=\"12\"\n            minLength=\"12\"\n            type=\"text\"\n            name=\"numberDT\"\n            {...register(\"numberDT\", {\n              required: \"Введите номер цифрового талона\",\n              minLength: {\n                value: 12,\n                message: \"Введите валидный номер цифрового талона\",\n              },\n              maxLength: {\n                value: 12,\n                message: \"Введите валидный номер цифрового талона\",\n              },\n              pattern: {\n                value: /^[0-9]+$/,\n                message: \"Цифровой талон состоит только из цифр\",\n              },\n            })}\n          />\n          {errors?.numberDT && (\n            <p className=\"error_text text-danger my-2\">\n              {errors.numberDT.message}\n            </p>\n          )}\n          <div className=\"d-flex w-100 align-items-center justify-content-center my-5\">\n            <button\n              type=\"submit\"\n              className=\"btn btn-success px-4 py-2\"\n              disabled={!isDirty || !isValid}\n            >\n              поиск\n            </button>\n          </div>\n        </form>\n      </div>\n      {isloading && <ModalLoading isLoading={isloading} />}\n      <ModalNotFoundDT isDTFound={isDTFound} setShow={setisDTFound}/>\n    </div>\n  );\n};\n\nexport default ResultExam;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}